
# 📦 InterviewDemo ― 点群転送・可視化のエンドツーエンドデモ

🕓 **最終更新日**：2025年5月8日  
🧑‍💻 **作者**：wandering-bee

---

## 🚀 プロジェクト概要

本リポジトリは、**センサシミュレーション → TCP通信 → 動的点検出 → GPU描画** までを一貫して実装した、リアルタイム点群処理のエンドツーエンドデモです。

- 軽量・シンプルな構成  
- フレームベース送信  
- 局所アルゴリズムによる構造評価  
- 面談・ポートフォリオ用途に最適化済み

> 🧪 本プロジェクトは ViridisNet プロジェクトから切り出した技術要素をベースに構成されています。

---

## 🧩 モジュール構成

| モジュール名              | 種別         | 役割                              |
|---------------------------|--------------|-----------------------------------|
| `CaptureTrataitsDll`      | C++ DLL      | 点群生成（静的背景＋動的点）     |
| `Core.Server`             | .NET EXE     | 点群生成 + TCP サーバ送信        |
| ├─ `ByteCodes`            | -            | 点群フレームのバッファ管理       |
| ├─ `Hubs`                 | -            | 接続・状態ログの管理             |
| ├─ `Utilities`            | -            | 通信補助・Socket ラッパー        |
| `Core.Net`                | .NET ライブラリ | 空間解析アルゴリズム群         |
| ├─ `DoP`                  | -            | 動的点検出（近傍距離評価）       |
| ├─ `Kinematics`           | -            | 座標変換・高度補正               |
| ├─ `Utilities`            | -            | SDK 抽象化（未使用）             |
| `Core.VGV`                | （未使用）   | GPU可視化エンジン（将来拡張用） |
| `Demo.Showcase.App`       | WPFアプリ    | 点群描画クライアント             |

---

## 🧠 技術ポイント

- 🧠 **DoP（Divergence-of-Point）アルゴリズム**  
  動的目標を軽量な距離閾値評価で検出

- 🛠 **C++ DLL 生成**  
  擬似背景＋動的点をリアルタイム合成

- 🔄 **TCP ストリーム送信（最新のみ）**  
  過去のフレームは破棄、常に最新状態を送信

- 🎨 **WPF + WriteableBitmap**  
  Z値ベースの深度グレースケール表示

- ⚙️ **明確なモジュール分離**  
  差し替え・単体テスト容易な構成

---

## 📦 処理フロー

```
[C++ DLL]
   ⇓（点群生成）
[Core.Server]
   ⇓（ByteCodesに格納）
[SocketServer]
   ⇓（TCP送信）
[Demo.Showcase.App]
   ⇓（WPF表示）
```

---

## 📊 性能指標

| ステージ                | 処理対象       | 処理時間（参考） |
|------------------------|----------------|------------------|
| 三角形分割（Delaunay） | 約3万頂点      | 約32ms           |
| 法線＋LUTカラー変換     | 約3万頂点      | 約2ms            |
| GPU転送                | -              | 未計測           |
| 描画（制限なし）        | -              | 制限なし         |

### 🔧 最適化の履歴

- 初期実装（NetTopologySuite）: 約380ms  
- 第一段階（OpenCvSharp4）: 約140ms  
- 第二段階（OpenCV 4.11 DLL）: 約82ms  
- 現在（CGAL 実装）: **約32ms**

---

## 🧪 実行方法

1. `CaptureTrataitsDll` を **Visual Studio** にて C++17 DLL としてビルド
2. `Core.Server` を起動（.NET 6 コンソールアプリ）  
  ポート番号・FPS 等は `Properties.Settings` にて調整可能
3. `Demo.Showcase.App` を起動  
  TCPサーバへ自動接続し、点群を描画

---

## 🧰 使用目的・活用シーン

- 📺 **技術ポートフォリオ提示**  
  構成力・性能意識・モジュール性のアピール

- 🔬 **軽量アルゴリズム評価**  
  PCL / Open3D 代替としての定量比較

- 🧩 **アーキテクチャ設計のテンプレート**  
  通信 → 処理 → 表示 の標準構成提示

- 🎓 **教育・研修用教材**  
  点群処理・Socket通信・描画の統合例

---

## 📘 補足事項

- 各モジュール直下の `README.md` はテンプレート状態です。必要に応じて機能・インタフェースごとに記述を追加してください。
- `Core.VGV`（GPUビジュアライザ）は現在未使用ですが、将来的な高速描画対応のために設計済みです。
- 通信はすべて CRLF（`\r\n`）区切りの簡易フレーミングを採用しています。
- `.vsconfig` や `launchSettings.json` などの開発支援ファイルは必要に応じて追加可能です。
